/**
 * Mobile & Responsive Enhancements for V2.5
 * Baserat på V1.0 best practices
 */

/* ===== MOBILE PORTRAIT (< 900px) ===== */
@media (max-width: 900px) and (orientation: portrait) {
    /* ===== LAYOUT ===== */
    .gs-main-content {
        padding: 1rem !important;
        padding-top: 4.5rem !important;
    }

    .container,
    .gs-container {
        padding: 0 1rem;
    }

    /* ===== TYPOGRAPHY ===== */
    h1, .gs-h1 { font-size: 1.8rem; line-height: 1.2; }
    h2, .gs-h2 { font-size: 1.5rem; line-height: 1.3; }
    h3, .gs-h3 { font-size: 1.25rem; line-height: 1.4; }
    h4, .gs-h4 { font-size: 1.125rem; }

    /* ===== GRIDS ===== */
    .gs-grid-cols-2,
    .gs-grid-cols-3,
    .gs-grid-cols-4,
    .grid-cols-2,
    .grid-cols-3,
    .grid-cols-4 {
        grid-template-columns: 1fr !important;
    }

    /* Behåll 2 kolumner för stat cards */
    .gs-grid-cols-2:has(.gs-stat-card),
    .grid-cols-2:has(.stat-card) {
        grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
    }

    /* ===== BUTTONS - Touch Optimized ===== */
    .btn,
    .gs-btn {
        padding: 0.625rem 1rem;
        font-size: 0.875rem;
        min-height: 44px; /* Apple touch target size */
        white-space: nowrap;
    }

    .btn--sm,
    .gs-btn-sm {
        padding: 0.5rem 0.75rem;
        font-size: 0.8125rem;
        min-height: 40px;
    }

    .btn--lg,
    .gs-btn-lg {
        width: 100%;
        padding: 0.875rem 1.25rem;
        min-height: 48px;
    }

    /* ===== FORMS - iOS Optimization ===== */
    /* Prevent iOS zoom on input focus by using 16px font-size */
    input[type="text"],
    input[type="email"],
    input[type="password"],
    input[type="tel"],
    input[type="number"],
    input[type="search"],
    input[type="url"],
    textarea,
    select,
    .form-input,
    .form-select,
    .gs-input {
        font-size: 16px !important;
        padding: 0.625rem 0.75rem;
        min-height: 44px;
    }

    textarea {
        min-height: 88px;
    }

    .form-group,
    .gs-form-group {
        margin-bottom: 1rem;
    }

    /* ===== CARDS ===== */
    .card,
    .gs-card {
        border-radius: var(--radius-md);
        margin-bottom: 0.75rem;
    }

    .card-header,
    .card-body,
    .gs-card-header,
    .gs-card-content {
        padding: 1rem;
    }

    /* ===== TABLES - Scrollable with Touch Support ===== */
    .table-wrapper,
    .table-responsive,
    .gs-table-responsive,
    .card:has(.table),
    .gs-card:has(.gs-table) {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        margin: 0.75rem 0;
    }

    .table,
    .gs-table {
        font-size: 0.875rem;
        min-width: 500px; /* Force horizontal scroll for wide tables */
    }

    .table th,
    .table td,
    .gs-table th,
    .gs-table td {
        padding: 0.5rem 0.75rem;
        white-space: nowrap;
    }

    .table th,
    .gs-table th {
        font-size: 0.8125rem;
    }

    /* Hide less important columns on portrait mobile */
    .col-split,
    .col-diff,
    .table-col-hide-portrait {
        display: none !important;
    }

    /* Compact rider names */
    .col-rider {
        max-width: 140px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }

    /* ===== MODALS - Full Screen on Mobile ===== */
    .modal-content,
    .gs-modal-content,
    .gs-modal-content-lg,
    .gs-modal-content-md,
    .gs-modal-content-sm {
        width: 100% !important;
        max-width: 100% !important;
        max-height: 100vh;
        border-radius: 0;
    }

    .modal-header,
    .modal-body,
    .gs-modal-header,
    .gs-modal-body {
        padding: 1rem !important;
    }

    /* ===== ALERTS ===== */
    .alert,
    .gs-alert {
        padding: 0.75rem 1rem;
        font-size: 0.875rem;
        gap: 0.5rem;
    }

    .alert svg,
    .gs-alert svg {
        width: 18px;
        height: 18px;
    }

    /* ===== BADGES ===== */
    .badge,
    .gs-badge {
        padding: 0.25rem 0.5rem;
        font-size: 0.75rem;
    }

    /* ===== FLEX STACKING ===== */
    .flex-stack-mobile,
    .gs-flex.gs-justify-between {
        flex-direction: column;
        gap: 0.75rem;
        align-items: flex-start !important;
    }

    .flex-stack-mobile > .btn,
    .gs-flex.gs-justify-between > .btn,
    .gs-flex.gs-justify-between .btn {
        width: 100%;
        justify-content: center;
    }

    /* ===== STAT CARDS ===== */
    /* NOTE: .stat-card, .stat-value, .stat-label responsive styles now in components.css */
    .gs-stat-card {
        padding: 0.75rem;
    }

    .stat-number,
    .gs-stat-number {
        font-size: 1.25rem;
        margin-bottom: 0.25rem;
    }

    .gs-stat-label {
        font-size: 0.625rem;
    }

    /* Hide buttons in stat cards on mobile */
    .stat-card .btn,
    .gs-stat-card .btn,
    .gs-stat-card .gs-btn {
        display: none;
    }

    /* ===== ICONS ===== */
    .icon-lg,
    .gs-icon-lg {
        width: 32px;
        height: 32px;
    }

    /* ===== SPACING ===== */
    .gap-md,
    .gs-gap-md {
        gap: 0.75rem;
    }

    .mb-lg,
    .gs-mb-lg {
        margin-bottom: 1rem;
    }

    .mt-lg,
    .gs-mt-lg {
        margin-top: 1rem;
    }

    /* ===== FOOTER ===== */
    .footer,
    .gs-footer {
        padding: 1rem 0;
        margin-top: 2rem;
    }

    .footer-version,
    .gs-footer-version {
        font-size: 0.7rem;
    }
}

/* ===== TABLET (601px - 1023px) ===== */
@media (min-width: 601px) and (max-width: 1023px) {
    .container,
    .gs-container {
        padding: 0 1.5rem;
    }

    .table,
    .gs-table {
        font-size: 0.9375rem;
    }

    /* Show split/diff columns on tablet landscape */
    @media (orientation: landscape) {
        .col-split,
        .col-diff {
            display: table-cell !important;
        }
    }
}

/* ===== TOUCH DEVICE OPTIMIZATIONS ===== */
@media (hover: none) and (pointer: coarse) {
    /* Increase touch targets */
    a,
    button,
    .btn,
    .clickable {
        min-height: 44px;
        min-width: 44px;
    }

    /* Remove hover states on touch devices */
    .hover-effect:hover,
    .card:hover,
    .table tbody tr:hover {
        background: inherit;
    }

    /* Add active states instead */
    .clickable:active,
    .btn:active,
    button:active {
        opacity: 0.7;
        transform: scale(0.98);
    }
}

/* ===== PRINT STYLES ===== */
@media print {
    .nav-bottom,
    .gs-sidebar,
    .gs-mobile-menu-toggle,
    .header-actions,
    .btn,
    button {
        display: none !important;
    }

    .table,
    .gs-table {
        font-size: 10pt;
    }

    .card,
    .gs-card {
        break-inside: avoid;
    }
}
