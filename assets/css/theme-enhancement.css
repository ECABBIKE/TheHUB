/**
 * THEME ENHANCEMENT - Liquid Glass + Dark Mode Preparation
 *
 * This file adds modern glass morphism effects and prepares for dark mode.
 * It's designed to be REVERSIBLE - removing this file won't break the site.
 *
 * All effects use CSS variables that can be overridden via branding.json
 */

/* ==========================================================================
   LIGHT MODE ENHANCEMENTS - Tone down harsh white
   ========================================================================== */

/* Note: Glass and gradient variables are now defined in theme.css
   This file only applies them to components */

/* ==========================================================================
   BACKGROUND GRADIENT - Subtle, elegant
   ========================================================================== */

body {
  background: linear-gradient(
    var(--gradient-angle, 135deg),
    var(--gradient-start, var(--color-bg-page)),
    var(--gradient-end, var(--color-bg-page))
  );
  background-attachment: fixed;
}

/* ==========================================================================
   LIQUID GLASS EFFECTS - Apply to cards and panels
   ========================================================================== */

/* Liquid Glass - FULL mode with background, border, shadow */
.card,
.panel,
.stats-card,
.info-card,
.info-box,
.alert,
.event-card,
.rider-card,
.series-logo-card,
.result-card,
.class-section,
.table-wrapper,
.filter-bar,
.filters-bar,
.search-box,
.modal-content {
  /* Light mode glass effect */
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
}

/* Light mode specific styling */
html[data-theme="light"] .card,
html[data-theme="light"] .panel,
html[data-theme="light"] .stats-card,
html[data-theme="light"] .info-card,
html[data-theme="light"] .info-box,
html[data-theme="light"] .alert,
html[data-theme="light"] .event-card,
html[data-theme="light"] .rider-card,
html[data-theme="light"] .series-logo-card,
html[data-theme="light"] .result-card,
html[data-theme="light"] .class-section,
html[data-theme="light"] .table-wrapper,
html[data-theme="light"] .filter-bar,
html[data-theme="light"] .filters-bar,
html[data-theme="light"] .search-box,
html[data-theme="light"] .modal-content {
  background: rgba(255, 255, 255, 0.65) !important;
  border: 1px solid rgba(0, 0, 0, 0.06) !important;
  box-shadow: 0 2px 16px rgba(0, 50, 100, 0.08) !important;
}

/* Dark mode specific styling */
html[data-theme="dark"] .card,
html[data-theme="dark"] .panel,
html[data-theme="dark"] .stats-card,
html[data-theme="dark"] .info-card,
html[data-theme="dark"] .info-box,
html[data-theme="dark"] .alert,
html[data-theme="dark"] .event-card,
html[data-theme="dark"] .rider-card,
html[data-theme="dark"] .series-logo-card,
html[data-theme="dark"] .result-card,
html[data-theme="dark"] .class-section,
html[data-theme="dark"] .table-wrapper,
html[data-theme="dark"] .filter-bar,
html[data-theme="dark"] .filters-bar,
html[data-theme="dark"] .search-box,
html[data-theme="dark"] .modal-content {
  background: rgba(26, 29, 40, 0.75) !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4), 0 12px 32px rgba(0, 0, 0, 0.3) !important;
}

/* Elevated cards (modals, dropdowns) get stronger effect */
.modal,
.dropdown-menu,
.popover,
.toast {
  backdrop-filter: blur(20px) saturate(190%);
  -webkit-backdrop-filter: blur(20px) saturate(190%);
  position: relative;
}

/* Tables get glass effect */
.table-responsive,
table.table {
  backdrop-filter: var(--glass-blur);
  -webkit-backdrop-filter: var(--glass-blur);
}

/* ==========================================================================
   INTERACTIVE GLOW EFFECTS
   ========================================================================== */

/* Buttons get subtle glow on hover - disabled for now, can be too distracting */
/*.btn-primary:hover,
.btn-accent:hover,
button[type="submit"]:hover {
  box-shadow:
    0 0 0 3px var(--accent-glow),
    var(--glass-shadow);
  transition: box-shadow var(--transition-base);
}*/

/* Links get glow on hover - disabled for now */
/*a:hover:not(.btn) {
  text-shadow: 0 0 8px var(--accent-glow);
  transition: text-shadow var(--transition-fast);
}*/

/* Input focus glow - subtle enhancement */
input:focus,
select:focus,
textarea:focus {
  box-shadow:
    0 0 0 2px var(--accent-glow),
    inset 0 1px 3px rgba(0, 0, 0, 0.05);
  transition: box-shadow var(--transition-base);
}

/* ==========================================================================
   HEADER SCROLL BEHAVIOR - Hide on scroll down, show on scroll up
   ========================================================================== */

.main-header {
  position: sticky;
  top: 0;
  z-index: var(--z-sticky);
  transition: transform 350ms cubic-bezier(0.4, 0, 0.2, 1);
  will-change: transform;

  /* Glass effect for header - preserve existing styles */
  backdrop-filter: var(--glass-blur);
  -webkit-backdrop-filter: var(--glass-blur);
}

/* Hide header when scrolling down */
.main-header.header-hidden {
  transform: translateY(-100%);
}

/* Show header when scrolling up */
.main-header.header-visible {
  transform: translateY(0);
}

/* Always show header at top of page */
body.at-top .main-header {
  transform: translateY(0) !important;
}

/* ==========================================================================
   SERIES-SPECIFIC GLASS TINTS (for future use)
   ========================================================================== */

/* Swecup - Mörkblå tint */
[data-series="swecup"] .card,
.series-swecup {
  background: rgba(30, 58, 95, 0.15) !important;
  border-color: rgba(30, 58, 95, 0.3) !important;
}

/* Capital - Cyan tint */
[data-series="capital"] .card,
.series-capital {
  background: rgba(8, 145, 178, 0.12) !important;
  border-color: rgba(8, 145, 178, 0.25) !important;
}

/* Götaland - Orange tint */
[data-series="gotaland"] .card,
.series-gotaland {
  background: rgba(234, 88, 12, 0.12) !important;
  border-color: rgba(234, 88, 12, 0.25) !important;
}

/* GravitySERIES DH - Grön tint */
[data-series="gravity-dh"] .card,
.series-gravity-dh {
  background: rgba(22, 163, 74, 0.12) !important;
  border-color: rgba(22, 163, 74, 0.25) !important;
}

/* GravitySERIES Enduro - Guld tint */
[data-series="gravity-enduro"] .card,
.series-gravity-enduro {
  background: rgba(202, 138, 4, 0.12) !important;
  border-color: rgba(202, 138, 4, 0.25) !important;
}

/* ==========================================================================
   PERFORMANCE OPTIMIZATIONS
   ========================================================================== */

/* Optimize backdrop-filter rendering */
@supports (backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px)) {
  .card,
  .panel,
  .main-header {
    /* Use GPU acceleration */
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
  }
}

/* Fallback for browsers that don't support backdrop-filter */
@supports not ((backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px))) {
  .card,
  .panel,
  .main-header {
    background: var(--color-bg-card) !important;
    box-shadow: var(--shadow-md) !important;
  }
}

/* ==========================================================================
   MOBILE OPTIMIZATIONS - Reduce blur on mobile for performance
   ========================================================================== */

@media (max-width: 767px) {
  html[data-theme="light"] {
    --glass-blur: blur(12px) saturate(160%);
  }

  html[data-theme="dark"] {
    --glass-blur: blur(12px) saturate(140%);
  }

  /* Lighter header blur on mobile */
  .main-header {
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }
}

/* ==========================================================================
   ACCESSIBILITY - Respect reduced motion preferences
   ========================================================================== */

@media (prefers-reduced-motion: reduce) {
  .main-header,
  .btn-primary,
  a,
  input,
  select,
  textarea {
    transition: none !important;
    animation: none !important;
  }

  .main-header {
    transform: none !important;
  }
}

/* ==========================================================================
   DEBUG MODE - Add outline to glass elements (for development)
   ========================================================================== */

html[data-debug="glass"] .card,
html[data-debug="glass"] .panel,
html[data-debug="glass"] .main-header {
  outline: 2px dashed rgba(255, 0, 255, 0.5);
  outline-offset: -2px;
}
